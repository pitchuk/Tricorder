function searcher(t,e,a){this.client=algoliasearch("M00M3RFW1A","97780d6ca6d719cafd5ef2556417e2ce");var i=!!$.urlParam("q");this.pre_search_url=i?"/":document.location.pathname+document.location.search,this.id=t.attr("id"),this.refresh_timeout=null,this.initialPage=0,this.page=0,this.page_size=24,this.delay=250,this.queryText="",this.filters={},this.sort="",this.in_stock_only=!1;var r=this;i&&"search"==this.id&&($.urlParam("q")&&($("#search_input").text(this.queryText),this.queryText=$.urlParam("q")),$.urlParam("page")&&(this.initialPage=$.urlParam("page")),$.urlParam("sort")&&(this.sort=".sort-"+$.urlParam("sort"),$("#sort_by").val(this.sort)),this.in_stock_only="true"==$.urlParam("stock"),$("#in_stock_only").prop("checked",this.in_stock_only),$.urlParam("filter")&&(this.filters["tags"]=[$.urlParam("filter")])),i||"collection"!=this.id||($.urlParam("sort")&&(this.sort=".sort-"+$.urlParam("sort"),$("#sort_by").val(this.sort)),$.urlParam("page")&&(this.initialPage=$.urlParam("page")),this.in_stock_only="true"==$.urlParam("stock"),$("#in_stock_only").prop("checked",this.in_stock_only),$.urlParam("filter")&&(this.filters["tags"]=[$.urlParam("filter")])),this.buildFilters=function(t,e,a,i){for(var s in i.empty(),a){if(!a[s])continue;let e=$("<li>").text(s.replace("pico","Pico")).data("value",s);e.append($("<small>").text(a[s])),e.click((function(e){let a=$(this).data("value");return $(this).hasClass("active")?(r.filters[t]=r.filters[t].filter((function(t){return t.toString()!==a.toString()})),0==r.filters[t].length&&delete r.filters[t]):r.filters[t]=[a.toString()],r.doSearch(!0),e.preventDefault(),!1})),t in this.filters&&-1!=this.filters[t].indexOf(s.toString())&&e.addClass("active"),$(i).append(e)}},this.loadResults=function(){let i=[];for(filter in this.filters){let t=[];for(value of this.filters[filter])t.push(filter+':"'+value+'"');t=t.join(" OR "),i.push("("+t+")")}loadHitCount=this.page_size,loadPage=this.page,0!=this.initialPage&&(loadPage=0,loadHitCount=this.initialPage*this.page_size,this.page=this.initialPage-1,this.initialPage=0),params={},this.queryText&&(params["q"]=this.queryText),this.sort&&(params["sort"]=this.sort.replace(".sort-","")),this.in_stock_only&&(params["stock"]=this.in_stock_only),this.filters["tags"]&&(params["filter"]=this.filters["tags"][0]),this.page&&(params["page"]=this.page+1),queryString=$.param(params),queryString&&(queryString="?"+queryString),"search"==this.id?history.replaceState(null,window.title,"/"+queryString):history.replaceState(null,window.title,window.location.pathname+queryString),this.in_stock_only&&i.push("(in_stock=1)"),a&&i.push(a),i=i.join(" AND ");let r=[];this.in_stock_only&&r.push("(in_stock=1)"),a&&r.push(a),r=r.join(" AND "),query=[{indexName:shop_domain+".variants"+this.sort,query:this.queryText,params:{filters:i,attributesToRetrieve:["new_search_result_html"],maxValuesPerFacet:100,facets:["tags"],page:loadPage,hitsPerPage:loadHitCount}},{indexName:shop_domain+".variants"+this.sort,query:this.queryText,hitsPerPage:0,params:{filters:r,maxValuesPerFacet:100,facets:["tags"]}}];var s=Date.now();this.client.search(query,function a(i,r){if(i)return;if(r.results[0].query!=this.queryText)return;for(var s of(0==r.results[0].page&&t.find(".product-grid article").remove(),r.results[0].hits))t.find(".product-grid").append(s.new_search_result_html);this.buildFilters("tags",r.results[1].nbHits,r.results[1].facets.tags,t.find("#tag"));let n=r.results[0].page<r.results[0].nbPages-1;t.find("#load_more_results").css("display",n?"block":"none"),e(r),window.updateCurrencies(),window.updateStockMessages()}.bind(this))},this.doSearch=function(e){clearTimeout(this.refresh_timeout),t.find("#load_more_results").hide(),this.page=0,this.refresh_timeout=setTimeout(function(){this.loadResults()}.bind(this),e?0:this.delay)},t.find("#sort_by").change((function(t){r.sort=$(this).val(),r.doSearch(!0)})),t.find("#in_stock_only").change((function(t){r.in_stock_only=this.checked,r.doSearch(!0)})),t.find("#load_more_results a").click((function(){r.page++,r.refresh_timeout=setTimeout(function(){r.loadResults()}.bind(r),0)}))}function adjustQuantity(t){var e=parseInt($("#quantity_input").val());e==e?(e+=t)<1&&(e=1):e=1,$("#quantity_input").val(e)}window.addEventListener("DOMContentLoaded",(function(){$("#show_departments").click((function(t){return $("#menu").toggleClass("desktop-only"),$("#menu").hasClass("desktop-only")||window.scrollTo({left:0,top:$("#brand_menu").offset().height+$("#benefits").offset().height+($("#benefits").offset().height>0?10:0),behavior:"smooth"}),t.preventDefault(),!1})),$(window).scroll((function(){let t;$("#logo_search_cart").offset().top-$(window).scrollTop()<=0?$("#logo_search_cart").addClass("shadow"):$("#logo_search_cart").removeClass("shadow")}));var t=1;function e(){window.reviewsLoaded=!0,$.ajax({url:"https://api.reviews.co.uk/product/review",dataType:"json",data:{store:"shop-pimoroni-com",sku:reviewSKUs,per_page:"50",page:t,minRating:1},method:"GET",success:function(e){for(review of(e.reviews.total>0&&$("#reviews").show(),e.reviews.data)){var a=20*review.rating;var i;body="",review.review&&(body="<p>"+review.review.replace("\n","<br><br>")+"</p>"),$("#reviews >div:first-child").append("<div><img src='https://www.gravatar.com/avatar/"+review.reviewer.gravatar+"?d=blank'/><div>"+review.reviewer.first_name+" <span>"+review.timeago+"</span> &nbsp; &nbsp; <span class='rating' style='float: right;'><span><span><img width='84' height='16' src='//cdn.shopify.com/s/files/1/0174/1800/t/69/assets/rating-stars-empty.png?18134'><span style='width: "+a+"%;'><img width='84' height='16' src='//cdn.shopify.com/s/files/1/0174/1800/t/69/assets/rating-stars-full.png?18134' alt=''></span></span></span></span></div>"+body+"</div>"),t>=e.reviews.last_page&&$("#load_more_reviews").hide()}}})}function a(t){return i(),window.scrollTo({left:0,top:$("#tabs").offset().top-$("#logo_search_cart").height()-20,behavior:"smooth"}),t.preventDefault(),!1}function i(){$("#tabs li").removeClass("active"),$("#description_tab").addClass("active"),$("#tab_content > div").hide(),$("#description_content").show(),history.replaceState(null,window.title,window.location.pathname+window.location.search)}function r(){$("#accessories_content > div:nth-of-type(3)").load("/products/"+productHandle+"?view=accessories",null,(function(){d()})),$("#tabs li").removeClass("active"),$("#accessories_tab").addClass("active"),$("#tab_content > div").hide(),$("#accessories_content").show(),history.replaceState(null,window.title,window.location.pathname+window.location.search+"#"+"show-accessories")}function s(){window.reviewsLoaded||window.loadReviews(),$("#tabs li").removeClass("active"),$("#reviews_tab").addClass("active"),$("#tab_content > div").hide(),$("#reviews_content").show(),history.replaceState(null,window.title,window.location.pathname+window.location.search+"#"+"show-reviews")}if(window.reviewsLoaded=!1,window.loadReviews=e,$("#load_more_reviews").click((function(a){return t++,e(),a.preventDefault(),!1})),window.scrollToDescription=a,productHandle){var n=window.location.hash;switch(hasAccessories&&$("#accessories_tab").css("display","inline-block"),$("#description_tab").click((function(){i()})),$("#reviews_tab").click((function(){s()})),$("#accessories_tab").click((function(){r()})),n){case"#show-accessories":r();break;case"#show-reviews":s();break;default:i();break}}var o={};o.addCurrency=function(t,e,a,i){o[t]={iso_code:t,symbol:e,locale:a,rounding:i}},o.addCurrency("GBP","&pound;","en",.01),o.addCurrency("BTC","μɃ","en",100),o.addCurrency("USD","$","en",.01),o.addCurrency("EUR","&euro;","de",.01),o.addCurrency("JPY","&yen;","jp",1),o.addCurrency("AUD","$","en",.01),o.addCurrency("NOK","kr","no",.01),o.addCurrency("CHF","CHF","ch",.01),o.addCurrency("NZD","$","en",.01),o.addCurrency("CAD","$","ca",.01);var c=o.GBP;function l(t){t in o?(c=o[t],Cookies.set("selectedCurrency2",t)):c=o.GBP,p()}function d(){$(".add-to-cart").each((function(t,e){var a=$(e);a.children("span").remove();var i=parseInt(a.data("variant-id"));i in cartContents&&a.append("<span class='super'>"+cartContents[i]+"</span>")}))}function u(){$.ajax({type:"GET",url:"/cart.json",dataType:"json",success:function(t){if($("#cart_item_count").data("count",t.item_count),$("#cart_item_count").text(t.item_count),total=t.total_price/100,-1!=shop_domain.indexOf(".com")){for(var e of(taxable_total=0,untaxable_total=0,t.items))taxable_total+=e.taxable?e.line_price:0,untaxable_total+=e.taxable?0:e.line_price;total=1.2*taxable_total+untaxable_total,total/=100}for(var e of(total=total.toFixed(2),$("#cart_total").data("total",total),value=h(total),cartContents={},t.items))cartContents[e.variant_id]=e.quantity;m(),$("#cart_total").html("<span class='super money' gbp='"+total+"'>"+value+"</span>"),"shop.pimoroni.com"==shop_domain&&p(),window.updateCartButtons()}})}function h(t){return amount=t*xchng_rates[c.iso_code],prefix=c.symbol,amount=Math.round(amount/c.rounding)*c.rounding,prefix+amount.toLocaleString(c.locale,{minimumFractionDigits:2,maximumFractionDigits:2}).replace(/[.,]00$/,"")}function p(){if("shop.pimoroni.com"==shop_domain){$("#currency_picker a").attr("data-currency",c.iso_code),$("#currency_picker a").html("<span></span>"+c.iso_code);var t=-1!=["GBP","EUR","BTC"].indexOf(c.iso_code);"EUR"==c.iso_code?$("#product_form_vat").html("Prices shown are ex. VAT &ndash; applicable taxes will be calculated during checkout."):$("#product_form_vat").text("All prices include VAT @ 20%"),$(".money").each((function(e,a){(a=$(a)).attr("gbp")||a.attr("gbp",a.text().replace(/[^\d.-]/g,"")),gbp=parseFloat(a.attr("gbp")),t||(gbp/=1.2),a.html(h(gbp))})),$(".vat").toggle(t),"GBP"==c.iso_code?$(".currency-warning").hide():($(".currency-warning").show(),$(".currency-warning .currency").text(c.iso_code))}}function f(){$("*[data-hires]").each((function(t,e){$(this).attr("src")?$(this).attr("src",$(this).data("hires")):$(this).css("background-image","url("+$(this).data("hires")+")")}))}function _(t,e,a){$.ajax({type:"POST",url:"/cart/add.js",data:{quantity:e,id:t},dataType:"json",success:function(t){a()},error:function(t){a(!0)}})}function m(){for(variant_id in cartContents)quantity=cartContents[variant_id],$("article[data-variant-id='"+variant_id+"'] .stock-message").text(quantity+" "+translations["cart.add_to_cart.in_cart"])}function g(t){var e=t.getDate();var a=t.getMonth()+1;var i;return t.getFullYear()+"-"+(a<=9?"0"+a:a)+"-"+(e<=9?"0"+e:e)}function v(){$("#variant_selector > div").removeClass("active"),$("#variant_selector > div[data-variant='"+selectedVariant.id+"']").addClass("active"),$(".variant-detail").hide(),$(".variant-"+selectedVariant.id).show(),"out-of-stock"==selectedVariant.status||"coming-soon"==selectedVariant.status?($("#notify_back_in_stock").data("variant-id",selectedVariant.id),$("#oos_notify").show(),$("#add_to_cart").hide()):($("#oos_notify").hide(),$("#add_to_cart").show()),$("h1[itemprop=name]").html(selectedVariant.title),multiVariant&&history.replaceState(null,window.title,window.location.pathname+"?variant="+selectedVariant.id);var t=["2019-12-25","2019-12-26","2020-01-01","2019-04-10","2019-04-13","2019-05-08","2019-05-25","2019-08-31","2020-12-25","2020-12-28"];var e=-(new Date).getTimezoneOffset()/60;var a=14;var i=storeTimezoneOffset;var r=new Date((new Date).getTime()+3600*(i-e)*1e3);var s=r.getDay();var n=r.getHours();var o=r.getMinutes();window.productPreOrderMessage||(window.productPreOrderMessage=""),window.productStockMessage||(window.productStockMessage="");var c="<strong>This is a pre-order!</strong> "+productPreOrderMessage;var l=productStockMessage;var d="<strong>Ships today</strong> if you order within the next <span></span>!";var u="<strong>In stock and ready to ship!</strong>";var h="<strong>Oh no, we're out of stock!</strong> Enter your e-mail below and we'll notify you.";var p="<strong>Coming soon!</strong> Enter your e-mail below and we'll notify you when it arrives.";var f=$("#shipping_message");switch(selectedVariant.status){case"pre-order":f.html(c);break;case"coming-soon":f.html(p);break;case"out-of-stock":f.html(h);break;case"available":""!=l?f.html(l):f.html(u);break}setTimeout(v,1e3*60)}window.updateCartButtons=d,window.updateCurrencies=p,$.fn.isInViewport=function(){var t=$(this).offset();var e=t.top;var a=e+t.height;var i=$(window).scrollTop();var r=i+$(window).height();return a>i&&e<r},$(".add-to-cart.ajax").live("click",(function(t){var e=$(this);e.addClass("processing");var a=e.data("variant-id");return $.ajax({type:"POST",url:"/cart/add.js",data:{quantity:1,id:a},dataType:"json",success:function(t){u(),setTimeout((function(){e.removeClass("processing"),e.hasClass("pre-order")?e.text("Pre-order"):e.text(translations["cart.add_to_cart.submit"]),e.children("span").remove(),e.append("<span class='super'>"+t.quantity+"</span>")}),300)},error:function(t){e.removeClass("processing"),e.text(translations["cart.add_to_cart.no_more_available"]),e.addClass("error")}}),t.preventDefault(),!1})),window.updateStockMessages=m,m(),"shop.pimoroni.com"==shop_domain&&(Cookies.get("selectedCurrency2")&&l(Cookies.get("selectedCurrency2")),$("#currency_picker >a").css("display","inline-block").click((function(t){return $("#currencies").css("display","grid"),t.preventDefault(),!1})),$("#currencies a").click((function(t){return $("#currencies").hide(),l($(this).data("currency")),t.preventDefault(),!1}))),f(),$("#lightbox").click((function(){$("#lightbox").hide()})),$("a[data-image]").click((function(t){return $("#lightbox img").attr("src",$(this).data("image")),$("#lightbox").css("display","flex"),t.preventDefault(),!1})),$("#cart_button").click((function(t){var e=parseInt($("#quantity_input").val());var a=selectedVariant.title;var i=$(this);return i.addClass("processing"),$.ajax({type:"POST",url:"/cart/add.js",data:{quantity:e,id:selectedVariant.id},dataType:"json",success:function(t){u(),i.removeClass("processing"),hasAccessories&&(r(),$("#added_to_cart_message").text(e+" x "+a+" added to cart   ✓"),$("#added_to_cart_message").show(),$("#extras_message").show(),window.scrollTo({left:0,top:$("#accessories_tab").offset().top-$("#logo_search_cart").height()-20,behavior:"smooth"}))},error:function(t){}}),t.preventDefault(),!1})),$("#variant_selector input").change((function(t,e){selectedVariant=variants[$(this).val()],v()})),$("#variant_selector select").change((function(t,e){selectedVariant=variants[$(this).val()],v()})),$("#featured_image img").data("was",$("#featured_image img").attr("src")),$("#variant_selector").mouseleave((function(){$("#featured_image img").data("was")&&$("#featured_image img").attr("src",$("#featured_image img").data("was"))})),$("#variant_selector >div").mouseenter((function(){$("#featured_image img").attr("src",$(this).data("large-image"))})),$("#variant_selector >div").click((function(){$("#featured_image img").data("was",$("#featured_image img").attr("src"))})),$("#notify_back_in_stock_email").live("keypress",(function(t){if(13==t.keyCode)return $("#notify_back_in_stock").trigger("click"),t.preventDefault(),!1})),$("#notify_back_in_stock").live("click",(function(t){var e=$(this);var a=$(this).data("variant-id");var i=$(this).data("product-id");return console.log({shop:"pimoroni-2.myshopify.com","notification[quantity_required]":1,"notification[product_no]":i,"variant[variant_no]":a,"notification[email]":$("#notify_back_in_stock_email").val()}),$.ajax({url:"https://app.backinstock.org/stock_notification/create.json",dataType:"json",data:{shop:"pimoroni-2.myshopify.com","notification[quantity_required]":1,"notification[product_no]":i,"variant[variant_no]":a,"notification[email]":$("#notify_back_in_stock_email").val()},method:"GET",success:function(){$("#notify_back_in_stock").remove(),$("#notify_back_in_stock_email").remove(),$("#notify_back_in_stock_message").html(translations["cart.add_to_cart.will_notify"])}}),t.preventDefault(),!1})),window.selectedVariant&&v();window.updateCart=u,window.updateCartButtons(),u()})),window.addEventListener("load",(function(){function t(t){$("#search").show(),0==t.results[1].nbHits?($("#search #no_results").show(),$("#search #products").hide()):($("#search #no_results").hide(),$("#search #products").show())}var e=new searcher($("#search"),t);function a(){e.queryText=$("#search_input").val(),e.queryText?($("#search >div:first-child span").text(e.queryText),"none"!=$("#content").css("display")&&(e.pre_search_url=document.location.pathname+document.location.search,e.filters={},e.sort="",e.in_stock_only=!1,$("#content").hide()),e.doSearch()):(clearTimeout(e.refresh_timeout),$("#search").hide(),$("#content").show(),history.replaceState(null,null,e.pre_search_url))}function i(t=!1){var e=$("#brand_menu").offset().height+$("#benefits").offset().height+($("#benefits").offset().height>0?10:0);$("#banners").length>0&&(e+=$("#banners").offset().height+($("#banners").offset().height>0?10:0)),window.scrollTo({left:0,top:e,behavior:t?"smooth":"auto"})}$("#search_form").submit((function(t){return t.preventDefault(),!1})),$("#search_input").keyup((function(){a()})),$("#search_input").change((function(){a()})),$("#search_input").focus((function(t){var e=$("#brand_menu").offset().height+$("#benefits").offset().height+($("#benefits").offset().height>0?10:0);$("#banners").length>0&&(e+=$("#banners").offset().height+($("#banners").offset().height>0?10:0)),i(e>window.scrollY)})),e.queryText&&($("#search_input").val(e.queryText),$("#search >div:first-child span").text(e.queryText),$("#content").hide(),e.doSearch(!0))}));
//# sourceMappingURL=/s/files/1/0174/1800/t/93/assets/pimoroni.js.map?v=4005604814252345670
